<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Le Go par l'exemple</a>: Empreinte SHA1</title>
    <link rel=stylesheet href="site.css">
  </head>
  <body>
    <div class="example" id="empreinte-sha1">
      <h2><a href="./">Le Go par l'exemple</a>: Empreinte SHA1</h2>
      
      <table>
        
        <tr>
          <td class="docs">
            <p>Les <a href="http://fr.wikipedia.org/wiki/SHA-1"><em>empreintes SHA1</em></a> sont
fréquemment utilisées pour calculer de courtes chaines
permettant d&rsquo;identifier des chaines ou des gros objets
binaires. Par exemple, le <a href="http://git-scm.com/">système de gestion de
version git system</a> utilise SHA1 pour
identifier les fichiers et répertoires versionnés.
Voici comment calculer des empreintes SHA1 en Go.</p>

          </td>
          <td class="code empty leading">
	        
            
          </td>
        </tr>
        
        <tr>
          <td class="docs">
            
          </td>
          <td class="code leading">
	        <a href="http://play.golang.org/p/mfm6sJAbZX"><img title="Exécuter le code" src="play.png" class="run" /></a>
            <div class="highlight"><pre><span class="kn">package</span> <span class="nx">main</span>
</pre></div>

          </td>
        </tr>
        
        <tr>
          <td class="docs">
            <p>Go implémente plusieurs fonctions de hachage dans
plusieurs packages <code>crypto/*</code>.</p>

          </td>
          <td class="code leading">
	        
            <div class="highlight"><pre><span class="kn">import</span> <span class="s">&quot;crypto/sha1&quot;</span>
<span class="kn">import</span> <span class="s">&quot;fmt&quot;</span>
</pre></div>

          </td>
        </tr>
        
        <tr>
          <td class="docs">
            
          </td>
          <td class="code leading">
	        
            <div class="highlight"><pre><span class="kd">func</span> <span class="nx">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">s</span> <span class="o">:=</span> <span class="s">&quot;sha1 this string&quot;</span>
</pre></div>

          </td>
        </tr>
        
        <tr>
          <td class="docs">
            <p>Le modèle pour générer une empreinte, c&rsquo;est
<code>sha1.New()</code>, <code>sha1.Write(bytes)</code>, puis
<code>sha1.Sum([]byte{})</code>.
Ici, on commence avec un nouveau hachage.</p>

          </td>
          <td class="code leading">
	        
            <div class="highlight"><pre>    <span class="nx">h</span> <span class="o">:=</span> <span class="nx">sha1</span><span class="p">.</span><span class="nx">New</span><span class="p">()</span>
</pre></div>

          </td>
        </tr>
        
        <tr>
          <td class="docs">
            <p><code>Write</code> attend un tableau d&rsquo;octets (bytes). Si
vous avez une chaîne, utilisez <code>[]byte(s)</code>
pour forcer le type.</p>

          </td>
          <td class="code leading">
	        
            <div class="highlight"><pre>    <span class="nx">h</span><span class="p">.</span><span class="nx">Write</span><span class="p">([]</span><span class="nb">byte</span><span class="p">(</span><span class="nx">s</span><span class="p">))</span>
</pre></div>

          </td>
        </tr>
        
        <tr>
          <td class="docs">
            <p>Ceci récupère le résultat du hachage dans une
slice d&rsquo;octets. L&rsquo;argument à <code>Sum</code> peut être
ajouté pour faire l&rsquo;ajouter à une slice d&rsquo;octets
existante. En général, ce n&rsquo;est pas nécessaire.</p>

          </td>
          <td class="code leading">
	        
            <div class="highlight"><pre>    <span class="nx">bs</span> <span class="o">:=</span> <span class="nx">h</span><span class="p">.</span><span class="nx">Sum</span><span class="p">(</span><span class="kc">nil</span><span class="p">)</span>
</pre></div>

          </td>
        </tr>
        
        <tr>
          <td class="docs">
            <p>On affiche souvent les valeurs SHA-1 en
hexadécimal, par exemple pour les commits Git.
Utilisez le formattage avec <code>%x</code> pour convertir
un résultat de hachage sous forme de chaîne
héxadécimale.</p>

          </td>
          <td class="code">
	        
            <div class="highlight"><pre>    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span>
    <span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;%x\n&quot;</span><span class="p">,</span> <span class="nx">bs</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

          </td>
        </tr>
        
      </table>
      
      <table>
        
        <tr>
          <td class="docs">
            <p>Lancer le programme calcule l&rsquo;empreinte et l&rsquo;affiche
de manière lisible en hexadécimal.</p>

          </td>
          <td class="code leading">
	        
            <div class="highlight"><pre><span class="gp">$</span> go run sha1-hashes.go
<span class="go">sha1 this string</span>
<span class="go">cf23df2207d99a74fbe169e3eba035e633b65d94</span>
</pre></div>

          </td>
        </tr>
        
        <tr>
          <td class="docs">
            <p>Vous pouvez calculer des empreintes de la même manière
qu&rsquo;ici avec d&rsquo;autres méthodes de hachage. Par exemple,
pour utiliser MD5, il faut importer <code>crypto/md5</code> et
utiliser <code>md5.New()</code>.</p>

          </td>
          <td class="code empty leading">
	        
            
          </td>
        </tr>
        
        <tr>
          <td class="docs">
            <p>Si vous avez besoin d&rsquo;empreintes sûre pour de la
cryptographie, vous devriez vous renseigner au sujet de
la <a href="https://fr.wikipedia.org/wiki/Fonction_de_hachage_cryptographique">force des différentes algorithmes</a>!</p>

          </td>
          <td class="code empty">
	        
            
          </td>
        </tr>
        
      </table>
      
      
      <p class="next">
        Exemple suivant: <a href="encodage-base64.html">Encodage Base64</a>.
      </p>
      
      <p class="footer">
        par <a href="https://twitter.com/clemkeirua">@clemkeirua</a> de <a href="http://www.keiruaprod.fr">KeiruaProd</a> | <a href="mailto:clement@keiruaprod.fr">retours</a> | <a href="https://github.com/Keirua/gobyexample">source</a> | <a href="https://github.com/Keirua/gobyexample#license">license</a>
      </p>
    </div>
  </body>
</html>
